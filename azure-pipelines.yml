trigger:
- azure

variables:
  - name: process.clean
    value: false

pool: self-hosted

stages:
- stage: Build
  displayName: Build stage
  jobs:
  - job: Build
    displayName: Build maven project
    steps:
    - task: Maven@4
      displayName: 'Maven package'
      inputs:
        mavenPomFile: 'pom.xml'
        goals: 'package'
    - task: CopyFiles@2
      displayName: 'copy files to artifact staging directory'
      inputs:
        SourceFolder: '$(System.DefaultWorkingDirectory)'
        Contents: '**/target/*.jar'
        TargetFolder: $(Build.ArtifactStagingDirectory)
    - task: PublishBuildArtifacts@1
      inputs:
        PathtoPublish: $(Build.ArtifactStaginDirectory)
        ArtifactName: Rabo-app-Build